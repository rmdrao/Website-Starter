---
/**
 * * These are alternating side cards with titles, check-marked list items, and images
 */

import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

import Badge from "@/components/badge/Badge.astro";
import Button from "@/components/button/Button.astro";
import { getLocaleFromUrl } from "@/js/localeUtils";
import { getLocalizedRoute } from "@/js/translationUtils";

interface Props {
	badge: string; // small badge
	title: string; // larger title
	description: string; // paragraph text
	buttonText: string; // button text
	href: string; // link to learn more
	image: ImageMetadata; // an imported image
	imageSide: "left" | "right";
	rest?: any; // catch-all for any additional parameters, such as "aria-label"
}

const { badge, image, title, buttonText, href, description, imageSide, ...rest } =
	Astro.props as Props;

const currLocale = getLocaleFromUrl(Astro.url);
---

<div
	class="mx-auto grid gap-8 rounded-lg md:grid-cols-2 md:gap-12 md:rounded-xl lg:gap-16"
	data-aos=`${imageSide == "left" ? "fade-right" : "fade-left"}`
	{...rest}
>
	<!-- text -->
	<div class=`${imageSide === "left" ? "md:order-last": ""} col-span-1 flex items-center`>
		<div class="md:py-6">
			<Badge>{badge}</Badge>
			<h2 class="h2 mt-4">{title}</h2>
			<div>
				<p class="text-muted-foreground mt-4 mr-auto max-w-md text-pretty">
					{description}
				</p>
			</div>
			<div class="z-20 mt-8 flex">
				<Button variant="outline" href={getLocalizedRoute(currLocale, href)} arrow="right">
					{buttonText}
				</Button>
			</div>
		</div>
	</div>

	<!-- image -->
	<div class="mb-auto h-auto w-full overflow-hidden rounded-xl border">
		<Image class="h-full w-full object-cover" src={image} alt={title} height={700} />
	</div>
</div>

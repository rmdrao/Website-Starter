---
import type { CollectionEntry } from "astro:content";
import { Icon } from "astro-icon/components";

import Button from "@/components/button/Button.astro";
import { getLocaleFromUrl } from "@/js/localeUtils";
import { getLocalizedRoute, getTranslatedData, useTranslations } from "@/js/translationUtils";

interface Props {
	service: CollectionEntry<"services">;
}

const { service, ...rest } = Astro.props as Props;

const currLocale = getLocaleFromUrl(Astro.url);
const t = useTranslations(currLocale);
---

<div class="flex" {...rest}>
	<div
		class="hover:border-accent bg-muted flex flex-col justify-between rounded-lg border p-8 transition-colors md:rounded-xl"
	>
		<div>
			<div
				class="border-accent relative mr-auto flex size-18 items-center justify-center rounded-full border-2"
			>
				<Icon name={service.data.icon} class="text-accent h-full w-full p-3" />
			</div>
			<h3 class="font-heading mt-6 text-xl font-semibold">{service.data.title}</h3>
			<p class="text-muted-foreground mt-4 text-base">{service.data.description}</p>
		</div>
		<Button
			variant="ghost"
			arrow="right"
			href={getLocalizedRoute(currLocale, `/services/${service.id}`)}
			class="mt-2 pl-0 font-medium hover:bg-transparent"
		>
			Learn More
		</Button>
	</div>
</div>
